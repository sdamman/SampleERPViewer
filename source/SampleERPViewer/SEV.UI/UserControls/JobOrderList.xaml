<UserControl x:Class="SEV.UI.UserControls.JobOrderList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:conv="clr-namespace:SEV.UI.Converters"
             xmlns:theme="clr-namespace:CustomT.UI"
             xmlns:uc="clr-namespace:SEV.UI.UserControls"
             mc:Ignorable="d" d:Background="White"
             d:DesignHeight="450" d:DesignWidth="800">

  <UserControl.Resources>
    <conv:FormatDateTimeConverter x:Key="FDTC"/>
    <conv:NullToCollapsedConverter x:Key="N2CC"/>
    <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource bodyCopy}">
      <Setter Property="Margin" Value="4,1"/>
      <Setter Property="VerticalAlignment" Value="Bottom"/>
    </Style>
    <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxStyle}">
      <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style>
    <Style TargetType="{x:Type RadioButton}" BasedOn="{StaticResource RadioButtonStyle}">
      <Setter Property="Margin" Value="5,0"/>
    </Style>
  </UserControl.Resources>

  <Grid Grid.Row="2" Margin="20,0">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Border Background="{theme:ThemeResource ResourceKey=MouseOverBackground}"
                Margin="-5,0,-5,2"/>
    <StackPanel Orientation="Horizontal" Grid.Row="0">
      <TextBlock Text="Job Order List" 
               FontFamily="Segoe UI Semibold" 
               FontSize="24"
               Foreground="{StaticResource brushMainThemeBlue}"/>
      <Button Style="{DynamicResource ButtonCopy}" 
              Height="25" Margin="4,0,4,0"
              Command="{Binding CommandCopyRouting}"/>
    </StackPanel>
    <uc:CurrentDate HorizontalAlignment="Right" VerticalAlignment="Bottom"/>

    <Border Grid.Row="1" BorderBrush="{theme:ThemeResource ResourceKey=MaxContrast}"
            d:BorderBrush="Black" BorderThickness="0,0,0,1">
      <Grid Margin="0,0,18,0">
        <Grid.Resources>
          <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource bodyCopy}">
            <Setter Property="Foreground" Value="{theme:ThemeResource ResourceKey=Complement}"/>
          </Style>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="2*"/>
          <ColumnDefinition Width="2*"/>
          <ColumnDefinition Width="2*"/>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="2*"/>
          <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Column="0" Text="Job Order"/>
        <TextBlock Grid.Column="1" Text="Sales Order"/>
        <TextBlock Grid.Column="2" Text="Part Number"/>
        <TextBlock Grid.Column="3" Text="QTY"/>
        <TextBlock Grid.Column="4" Text="Status"/>
        <TextBlock Grid.Column="5" Text="Due Date"/>
      </Grid>
    </Border>
    <ScrollViewer Grid.Row="2">
      <ItemsControl ItemsSource="{Binding JobOrderList, FallbackValue='12'}"
                    AlternationCount="2">
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <DataTemplate.Resources>
              <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource bodyCopy}"/>
            </DataTemplate.Resources>

            <Grid x:Name="content">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="1*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
              </Grid.ColumnDefinitions>
              <Button Grid.Column="0" 
                      Content="{Binding JobOrderNumber, FallbackValue='H1311-0000'}"
                      Command="{Binding DataContext.CommandGetJobOrder, 
                RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UserControl}}"
                      CommandParameter="{Binding JobOrderNumber}"
                      HorizontalContentAlignment="Center"
                      HorizontalAlignment="Left"
                      MaxWidth="100"
                      Padding="10,0"
                      Margin="3,1" Cursor="Hand"/>
              <Button Grid.Column="1" 
                      Content="{Binding SalesOrderNumber, FallbackValue='079796'}"
                      Command="{Binding DataContext.CommandCallSalesOrder, 
                RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=Window}}"
                      CommandParameter="{Binding SalesOrderNumber}"
                      HorizontalContentAlignment="Center"
                      HorizontalAlignment="Left"
                      MaxWidth="100"
                      Padding="10,0"
                      Margin="3,1" Cursor="Hand"
                      Visibility="{Binding SalesOrderNumber,
                      Converter={StaticResource N2CC}}"/>
              <Expander Grid.Column="2"
                          Style="{StaticResource ExpanderButton}"
                          Header="{Binding PartNumber, FallbackValue='57221'}"
                          Margin="25,1"
                        Visibility="{Binding PartNumber,
                        Converter={StaticResource N2CC}}">
                <uc:PartNumberBox Tag="{Binding PartNumber}"/>
              </Expander>
              <TextBlock Grid.Column="3" 
                           Text="{Binding Quantity, FallbackValue='4'}"/>
              <TextBlock Grid.Column="4" 
                           Text="{Binding Status, FallbackValue='OPEN'}"/>
              <TextBlock Grid.Column="5" 
                           Text="{Binding DueDate,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
            </Grid>
            <DataTemplate.Triggers>
              <Trigger Property="ItemsControl.AlternationIndex"
										 Value="1">
                <Setter TargetName="content" 
											Property="Background"
											Value="{theme:ThemeResource ResourceKey=MinContrast}"/>
              </Trigger>
            </DataTemplate.Triggers>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </ScrollViewer>
  </Grid>


</UserControl>
