<UserControl x:Class="SEV.UI.UserControls.JobOrderDetail"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:conv="clr-namespace:SEV.UI.Converters"
             xmlns:theme="clr-namespace:CustomT.UI"
             xmlns:uc="clr-namespace:SEV.UI.UserControls"
             mc:Ignorable="d" d:Background="White"
             d:DesignHeight="450" d:DesignWidth="800">

  <UserControl.Resources>
    <conv:FormatDateTimeConverter x:Key="FDTC"/>
    <conv:RoundDecimalsConverter x:Key="RDC"/>
    <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource bodyCopy}">
      <Setter Property="Margin" Value="4,1"/>
      <Setter Property="VerticalAlignment" Value="Bottom"/>
    </Style>
    <Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource TextBoxStyle}">
      <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style>
    <Style TargetType="{x:Type RadioButton}" BasedOn="{StaticResource RadioButtonStyle}">
      <Setter Property="Margin" Value="5,0"/>
    </Style>
  </UserControl.Resources>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <Grid Grid.Row="0" Margin="10">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>
      <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1.1*"/>
          <ColumnDefinition Width="2*"/>
          <ColumnDefinition Width="0.8*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" >
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Job Order:"/>
            <TextBlock Text="{Binding JobOrderNumber, FallbackValue='H1311-0000'}"/>
          </StackPanel>
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Sales Order:"/>
            <TextBlock Text="{Binding SalesOrderNumber, FallbackValue='079796'}"/>
          </StackPanel>
        </StackPanel>
        <StackPanel Grid.Column="1" >
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Part Number:"/>
            <TextBlock Text="{Binding PartNumber, FallbackValue='57221'}"/>
          </StackPanel>
          <TextBlock Text="{Binding Description, FallbackValue='Something really long goes here'}"/>
        </StackPanel>
        <StackPanel Grid.Column="2" >
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Group:"/>
            <TextBlock Text="{Binding Group, FallbackValue='SM'}"/>
          </StackPanel>
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Status:"/>
            <TextBlock Text="{Binding Status, FallbackValue='OPEN'}"/>
          </StackPanel>
        </StackPanel>
        <StackPanel Grid.Column="3" >
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="QTY:"/>
            <TextBlock Text="{Binding Quantity, FallbackValue='4'}"/>
          </StackPanel>
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Product Class:"/>
            <TextBlock Text="{Binding ProductClass, FallbackValue='XYZ'}"/>
          </StackPanel>
        </StackPanel>

      </Grid>
      <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0">
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Due Date:"/>
            <TextBlock Text="{Binding DueDate,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
          </StackPanel>
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Start Date:"/>
            <TextBlock Text="{Binding StartDate,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
          </StackPanel>
        </StackPanel>
        <StackPanel Grid.Column="1">
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Release Date:"/>
            <TextBlock Text="{Binding ReleaseDate,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
          </StackPanel>
          <StackPanel Orientation="Horizontal" >
            <TextBlock Text="Actual Release Date:"/>
            <TextBlock Text="{Binding ActualReleaseDate,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
          </StackPanel>
        </StackPanel>
      </Grid>
    </Grid>

    <Grid Grid.Row="1" Margin="20,10">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>
      <Border Background="{theme:ThemeResource ResourceKey=MouseOverBackground}"
                Margin="-5,0,-5,2"/>
      <StackPanel Orientation="Horizontal" Grid.Row="0">
        <TextBlock Text="Job Routing" 
               FontFamily="Segoe UI Semibold" 
               FontSize="24"
               Foreground="{StaticResource brushMainThemeBlue}"/>
        <Button Style="{DynamicResource ButtonCopy}" 
              Height="25" Margin="4,0,4,0"
              Command="{Binding CommandCopyRouting}"/>
      </StackPanel>
      <uc:CurrentDate HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
      <Border Grid.Row="1" BorderBrush="{theme:ThemeResource ResourceKey=MaxContrast}"
            d:BorderBrush="Black" BorderThickness="0,0,0,1">
        <Grid Margin="0,0,18,0">
          <Grid.Resources>
            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource bodyCopy}">
              <Setter Property="Foreground" Value="{theme:ThemeResource ResourceKey=Complement}"/>
            </Style>
          </Grid.Resources>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="3*"/>
          </Grid.ColumnDefinitions>
          <TextBlock Grid.Column="0" Text="Op Num"/>
          <TextBlock Grid.Column="1" Text="Work Center"/>
          <TextBlock Grid.Column="2" Text="Est. Hours"/>
          <TextBlock Grid.Column="3" Text="Actual Hours"/>
          <TextBlock Grid.Column="4" Text="Last Completion"/>
          <TextBlock Grid.Column="5" Text="Scheduled Start"/>
          <TextBlock Grid.Column="6" Text="Scheduled Finish"/>
        </Grid>
      </Border>
      <ScrollViewer Grid.Row="2">
        <ItemsControl ItemsSource="{Binding JobOrderDetails, FallbackValue='12'}"
                    AlternationCount="2">
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <DataTemplate.Resources>
                <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource bodyCopy}"/>
              </DataTemplate.Resources>

              <Grid x:Name="content">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="1*"/>
                  <ColumnDefinition Width="2*"/>
                  <ColumnDefinition Width="2*"/>
                  <ColumnDefinition Width="2*"/>
                  <ColumnDefinition Width="3*"/>
                  <ColumnDefinition Width="3*"/>
                  <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" 
                           Text="{Binding OperationID, FallbackValue='10'}"/>
                <TextBlock Grid.Column="1" 
                           Text="{Binding WorkCenter, FallbackValue='LPR'}"/>
                <TextBlock Grid.Column="2" 
                           Text="{Binding EstimatedHours, 
                                  Converter={StaticResource RDC},
                                  ConverterParameter=3,
                                  FallbackValue='1.35'}"/>
                <TextBlock Grid.Column="3" 
                           Text="{Binding ActualHours, 
                                  Converter={StaticResource RDC},
                                  ConverterParameter=3,
                                  FallbackValue='1.22'}"/>
                <TextBlock Grid.Column="4" 
                           Text="{Binding LastCompletionDate,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
                <TextBlock Grid.Column="5" 
                           Text="{Binding ScheduleStart,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
                <TextBlock Grid.Column="6" 
                           Text="{Binding ScheduleFinish,
                                  Converter={StaticResource FDTC},
                                  FallbackValue='2025-02-03'}"/>
              </Grid>
              <DataTemplate.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex"
										 Value="1">
                  <Setter TargetName="content" 
											Property="Background"
											Value="{theme:ThemeResource ResourceKey=MinContrast}"/>
                </Trigger>
              </DataTemplate.Triggers>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </ScrollViewer>
    </Grid>

  </Grid>
</UserControl>
