<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:theme="clr-namespace:CustomT.UI"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d">

  <ControlTemplate x:Key="CheckBoxTemplate" TargetType="{x:Type CheckBox}">
    <Grid
            x:Name="templateRoot"
            Background="Transparent"
            SnapsToDevicePixels="True">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>
      <Border x:Name="checkBoxBorder"
              Margin="1"
              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
              Background="{TemplateBinding Background}"
              BorderBrush="{TemplateBinding BorderBrush}"
              BorderThickness="{TemplateBinding BorderThickness}">
        <Grid x:Name="markGrid">
          <Canvas>

            <Path Name="optionMark"
                  Canvas.Top="-5"
                  Data="m 0.94 14.754 
                  c 0.0915 -0.0341 0.1784 -0.0925 0.2744 -0.1024 0.7704 -0.0794 
                  1.4309 0.6994 1.8913 1.2693 0.9218 1.3175 1.4386 2.8803 
                  1.9047 4.4485 0.502 1.9181 0.9726 3.8525 1.6515 5.7046 
                  1.249 2.6714 2.1351 0.6829 4.6503 -1.0024 0.8036 -1.7062 
                  1.4616 -3.4886 2.1916 -5.2343 1.2174 -2.8765 2.9412 -5.4069 
                  4.7509 -7.8442 1.9763 -2.6587 4.4324 -4.7491 6.9966 -6.6471 
                  0.3425 -0.2435 2.3039 -1.6395 2.6675 -1.8909 0.4072 -0.2815 
                  1.6511 -1.0837 1.2295 -0.8299 -0.6264 0.3772 -1.2437 0.7748 
                  -1.8447 1.2003 -0.301 0.2131 0.6289 -0.3748 0.9434 -0.5622 
                  0 0 2.7401 -2.4573 2.7401 -2.4573 
                  v 0 C 27.9293 2.614 24.9679 4.615 22.0757 6.7329 
                  19.5161 8.6674 17.0632 10.7789 15.1124 13.4851 
                  c -1.8203 2.4943 -3.5737 5.0689 -4.8237 7.9848 -0.2963 0.6967 
                  -0.5473 1.2776 -0.8299 1.9785 -0.3525 0.8743 -0.675 1.7836 
                  -1.1411 2.5946 -0.1161 0.202 -0.2609 0.3818 -0.3913 0.5726 
                  0.9624 -0.5826 1.9135 -1.1889 2.8871 -1.7477 0.065 -0.0373 -0.0818 
                  0.1514 -0.1511 0.1774 -0.0594 0.0223 -0.1264 -0.0205 -0.1822 -0.0525 
                  C 10.1608 24.8092 9.9822 24.4276 9.8097 24.0998 9.0611 22.2956                  8.5745 20.3818 8.1182 18.4643 7.6554 16.8358 7.1345 15.2137 
                  6.2062 13.832 5.586 13.0287 4.8268 12.2289 3.8212 12.1836 
                  c 0 0 -2.8813 2.5704 -2.8813 2.5704 z "
                  Fill="{TemplateBinding BorderBrush}"
                  Opacity="0"
                  Stroke="{TemplateBinding BorderBrush}"
                  StrokeEndLineCap="Round"
                  StrokeLineJoin="Round"
                  StrokeMiterLimit="4"
                  StrokeStartLineCap="Round"
                  StrokeThickness="0.774169" />
          </Canvas>
          <Rectangle x:Name="indeterminateMark"
                     Width="15"
                     Height="15"
                     Margin="3"
                     Fill="{TemplateBinding Foreground}"
                     Opacity="0" />
        </Grid>
      </Border>
      <ContentPresenter x:Name="contentPresenter"
                Grid.Column="1"
                Margin="10,5,0,0"
                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                Focusable="False"
                RecognizesAccessKey="True"
                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
    </Grid>
    <ControlTemplate.Triggers>
      <Trigger Property="HasContent" Value="true">
        <Setter Property="Padding" Value="4,-1,0,0" />
      </Trigger>
      <Trigger Property="IsMouseOver" Value="true">
        <Setter TargetName="checkBoxBorder" Property="Background" 
                Value="{theme:ThemeResource ResourceKey=MouseOverBackground}" />
        <Setter TargetName="checkBoxBorder" Property="BorderBrush" 
                Value="{theme:ThemeResource ResourceKey=MouseOverBorder}" />
        <Setter TargetName="optionMark" Property="Fill" 
                Value="{theme:ThemeResource ResourceKey=MouseOverBorder}" />
        <Setter TargetName="optionMark" Property="Stroke" 
                Value="{theme:ThemeResource ResourceKey=MouseOverBorder}" />
        <Setter TargetName="indeterminateMark" Property="Fill" 
                Value="{theme:ThemeResource ResourceKey=MouseOverForeground}" />
      </Trigger>
      <Trigger Property="IsEnabled" Value="false">
        <Setter TargetName="checkBoxBorder" Property="Opacity" 
                Value="{theme:ThemeResource ResourceKey=ControlDisabledOpacity}" />
        <Setter TargetName="checkBoxBorder" Property="Opacity" 
                Value="{theme:ThemeResource ResourceKey=ControlDisabledOpacity}" />
        <Setter TargetName="optionMark" Property="Opacity" Value="0" />
        <Setter TargetName="indeterminateMark" Property="Opacity" 
                Value="{theme:ThemeResource ResourceKey=ControlDisabledOpacity}" />
      </Trigger>
      <Trigger Property="IsPressed" Value="true">
        <Setter TargetName="checkBoxBorder" Property="Background" 
                Value="{theme:ThemeResource ResourceKey=PressedBackground}" />
        <Setter TargetName="checkBoxBorder" Property="BorderBrush" 
                Value="{theme:ThemeResource ResourceKey=PressedBorder}" />
        <Setter TargetName="optionMark" Property="Fill" 
                Value="{theme:ThemeResource ResourceKey=PressedBorder}" />
        <Setter TargetName="optionMark" Property="Stroke" 
                Value="{theme:ThemeResource ResourceKey=PressedBorder}" />
        <Setter TargetName="indeterminateMark" Property="Fill" 
                Value="{theme:ThemeResource ResourceKey=PressedForeground}" />
      </Trigger>
      <Trigger Property="IsChecked" Value="true">
        <Setter TargetName="optionMark" Property="Opacity" Value="1" />
        <Setter TargetName="indeterminateMark" Property="Opacity" Value="0" />
      </Trigger>
      <Trigger Property="IsChecked" Value="{x:Null}">
        <Setter TargetName="optionMark" Property="Opacity" Value="0" />
        <Setter TargetName="indeterminateMark" Property="Opacity" Value="1" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>


  <ControlTemplate x:Key="SortBoxTemplate" TargetType="{x:Type CheckBox}">
    <Border x:Name="checkBoxBorder"
              Margin="1"
              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
              Background="{theme:ThemeResource ResourceKey=TransparentBackground}">
      <StackPanel Orientation="Horizontal">
        <ContentPresenter x:Name="contentPresenter"
                          Margin="2,0"
                          Style="{StaticResource SortableHeading}"
                          VerticalAlignment="Center"
                          Focusable="False"
                          RecognizesAccessKey="True"
                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
        <Viewbox x:Name="markGrid"
                 Width="20"
                 Stretch="Uniform">
          <Canvas Width="40" Height="40">
            <Path Name="ascArrow"
                  Data="M 7,25.339746 12,34 M 17,25.339746 12,34 M 12,6 v 28"
                  Stroke="{TemplateBinding Foreground}"
                  StrokeEndLineCap="Round"
                  StrokeLineJoin="Round"
                  StrokeStartLineCap="Round"
                  StrokeThickness="4" />
            <Path x:Name="descArrow"
                  Data="M 23,14.660254 28,6 M 33,14.660254 28,6 m 0,28 V 6"
                  Stroke="{TemplateBinding Foreground}"
                  StrokeEndLineCap="Round"
                  StrokeLineJoin="Round"
                  StrokeStartLineCap="Round"
                  StrokeThickness="4" />
          </Canvas>
        </Viewbox>
      </StackPanel>
    </Border>
    <ControlTemplate.Triggers>
      <Trigger Property="HasContent" Value="true">
        <Setter Property="Padding" Value="4,-1,0,0" />
      </Trigger>
      <Trigger Property="IsMouseOver" Value="true">
        <Setter TargetName="checkBoxBorder" Property="BorderBrush" 
                Value="{theme:ThemeResource ResourceKey=MouseOverBorder}" />
        <Setter TargetName="ascArrow" Property="Stroke" 
                Value="{theme:ThemeResource ResourceKey=PressedBackground}" />
        <Setter TargetName="descArrow" Property="Stroke" 
                Value="{theme:ThemeResource ResourceKey=PressedBackground}" />
      </Trigger>
      <Trigger Property="IsEnabled" Value="false">
        <Setter TargetName="checkBoxBorder" Property="Opacity" 
                Value="{theme:ThemeResource ResourceKey=ControlDisabledOpacity}" />
        <Setter TargetName="checkBoxBorder" Property="Opacity" 
                Value="{theme:ThemeResource ResourceKey=ControlDisabledOpacity}" />
        <Setter TargetName="ascArrow" Property="Opacity" Value="0.4" />
        <Setter TargetName="descArrow" Property="Opacity" Value="0.4" />
      </Trigger>
      <Trigger Property="IsPressed" Value="true">
        <Setter TargetName="checkBoxBorder" Property="BorderBrush" 
                Value="{theme:ThemeResource ResourceKey=PressedBorder}" />
        <Setter TargetName="ascArrow" Property="Stroke" 
                Value="{theme:ThemeResource ResourceKey=MaxContrast}" />
        <Setter TargetName="descArrow" Property="Stroke" 
                Value="{theme:ThemeResource ResourceKey=MaxContrast}" />
      </Trigger>
      <Trigger Property="IsChecked" Value="true">
        <Setter TargetName="ascArrow" Property="Opacity" Value="1" />
        <Setter TargetName="descArrow" Property="Opacity" Value="0" />
      </Trigger>
      <Trigger Property="IsChecked" Value="false">
        <Setter TargetName="ascArrow" Property="Opacity" Value="0" />
        <Setter TargetName="descArrow" Property="Opacity" Value="1" />
      </Trigger>
      <Trigger Property="IsChecked" Value="{x:Null}">
        <Setter TargetName="ascArrow" Property="Opacity" Value="0.4" />
        <Setter TargetName="descArrow" Property="Opacity" Value="0.4" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>


  <Style x:Key="CheckBoxStyle" TargetType="{x:Type CheckBox}">
    <Setter Property="FontFamily" Value="Segoe UI Semibold" />
    <Setter Property="FontWeight" Value="Medium" />
    <Setter Property="FontSize" Value="14" />
    <Setter Property="Background" 
            Value="{theme:ThemeResource ResourceKey=ContentBackground}" />
    <Setter Property="BorderBrush" 
            Value="{theme:ThemeResource ResourceKey=ContentBorder}" />
    <Setter Property="Foreground" 
            Value="{theme:ThemeResource ResourceKey=ContentForeground}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Template" Value="{DynamicResource CheckBoxTemplate}" />
  </Style>


  <Style x:Key="SortableHeaderCheck" TargetType="{x:Type CheckBox}">
    <Setter Property="Background" 
            Value="{theme:ThemeResource ResourceKey=ContentBackground}" />
    <Setter Property="BorderBrush" Value="{x:Null}" />
    <Setter Property="Foreground" 
            Value="{theme:ThemeResource ResourceKey=ContentForeground}" />
    <Setter Property="Template" Value="{DynamicResource SortBoxTemplate}" />
    <Setter Property="IsThreeState" Value="True"/>
  </Style>


  <Style x:Key="CheckBoxSmall" TargetType="{x:Type CheckBox}">
    <Setter Property="FontFamily" Value="Segoe UI Semibold" />
    <Setter Property="FontWeight" Value="Medium" />
    <Setter Property="FontSize" Value="14" />
    <Setter Property="Background" 
            Value="{theme:ThemeResource ResourceKey=MinContrast}" />
    <Setter Property="BorderBrush" 
            Value="{theme:ThemeResource ResourceKey=Complement}" />
    <Setter Property="Foreground" 
            Value="{theme:ThemeResource ResourceKey=MaxContrast}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="VerticalAlignment" Value="Center"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type CheckBox}">
          <Grid
            x:Name="templateRoot"
            Background="Transparent"
            SnapsToDevicePixels="True">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Border x:Name="checkBoxBorder"
              Margin="1"
              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
              Background="{TemplateBinding Background}"
              BorderBrush="{TemplateBinding BorderBrush}"
              BorderThickness="{TemplateBinding BorderThickness}">
              <Grid>
                <Path x:Name="optionMark"
                      Data="m1,3 l2,-2 l5,5 l5,-5 l2,2 l-5,5 
                            l5,5 l-2,2 l-5,-5 l-5,5 l-2,-2 l5,-5z"
                      Fill="{TemplateBinding BorderBrush}"
                      d:Fill="{StaticResource brushMainThemeBlue}"
                      Opacity="0"/>
                <Rectangle x:Name="indeterminateMark"
                           Width="12"
                           Height="12"
                           Margin="2"
                           Fill="{theme:ThemeResource ResourceKey=Complement}"
                           Opacity="0" />
              </Grid>
            </Border>
            <ContentPresenter x:Name="contentPresenter"
                Grid.Column="1"
                Margin="5"
                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                Focusable="False"
                RecognizesAccessKey="True"
                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />

          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="HasContent" Value="true">
              <Setter Property="Padding" Value="4,-1,0,0" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="true">
              <Setter TargetName="checkBoxBorder" Property="Background" 
                      Value="{theme:ThemeResource ResourceKey=Highlight}" />
              <Setter TargetName="checkBoxBorder" Property="BorderBrush" 
                      Value="{theme:ThemeResource ResourceKey=BoldHighlight}" />
              <Setter TargetName="optionMark" Property="Fill" 
                      Value="{theme:ThemeResource ResourceKey=MutedContrast}" />
              <Setter TargetName="indeterminateMark" Property="Fill" 
                      Value="{theme:ThemeResource ResourceKey=MutedContrast}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
              <Setter TargetName="templateRoot" Property="Opacity" 
                      Value="{theme:ThemeResource ResourceKey=ControlDisabledOpacity}" />
            </Trigger>
            <Trigger Property="IsChecked" Value="true">
              <Setter TargetName="optionMark" Property="Opacity" Value="1" />
              <Setter TargetName="indeterminateMark" Property="Opacity" Value="0" />
            </Trigger>
            <Trigger Property="IsChecked" Value="{x:Null}">
              <Setter TargetName="optionMark" Property="Opacity" Value="0" />
              <Setter TargetName="indeterminateMark" Property="Opacity" Value="1" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>


</ResourceDictionary>